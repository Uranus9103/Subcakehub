local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

-- GUI
local ScreenGui = Instance.new("ScreenGui", LocalPlayer.PlayerGui)
local Button = Instance.new("TextButton", ScreenGui)
Button.Size = UDim2.new(0, 200, 0, 50)
Button.Position = UDim2.new(0.5, -100, 0.5, -25)
Button.Text = "Toggle Wi-Fi"

local disconnected = false
local originalWalkSpeed = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") and LocalPlayer.Character.Humanoid.WalkSpeed or 16

-- Hiệu ứng giả mất mạng
local function simulateLag()
    local overlay = Instance.new("Frame", ScreenGui)
    overlay.Size = UDim2.new(1,0,1,0)
    overlay.BackgroundColor3 = Color3.new(0,0,0)
    overlay.BackgroundTransparency = 0.5
    overlay.Name = "NetworkOverlay"

    -- Giả lập lag: chặn input
    local inputBlocked = UserInputService.InputBegan:Connect(function(input)
        input:Clone() -- bỏ qua tất cả input
    end)

    return overlay, inputBlocked
end

local overlay
local inputBlock

Button.MouseButton1Click:Connect(function()
    disconnected = not disconnected
    if disconnected then
        Button.Text = "Wi-Fi OFF"
        -- Dừng nhân vật
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.WalkSpeed = 0
        end
        -- Overlay màn hình đen + lag
        overlay, inputBlock = simulateLag()
    else
        Button.Text = "Wi-Fi ON"
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.WalkSpeed = originalWalkSpeed
        end
        if overlay then overlay:Destroy() end
        if inputBlock then inputBlock:Disconnect() end
    end
end)
